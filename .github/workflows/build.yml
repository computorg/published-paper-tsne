name: Main Workflows

on:
  push:
    branches: ["main"]
  repository_dispatch:
    types: [custom-event] 
  workflow_dispatch:

permissions:
  contents: write
  pages: write

  
jobs:
  call_python_workflows:
    uses: computorg/workflows/.github/workflows/python-env.yml@main
    secrets:
      token: ${{ secrets.GITHUB_TOKEN }}
    with:
      config-path: './config/quarto_config.yml'
  call_quartopublish_workflows:
    uses: computorg/workflows/.github/workflows/publish-render.yml@main
    needs: call_python_workflows
    with:
      config-path: './config/quarto_config.yml'
    secrets:
      token: ${{ secrets.GITHUB_TOKEN }}